---
name: jenkins_master
packages:
- jenkins
- java
- nginx
- git
- libfontconfig
- libfreetype
- libyaml
- phantomjs
- ruby
- configure_jenkins
- golang
- gcf
- spiff
templates:
  bin/jenkins_master_ctl: bin/jenkins_master_ctl
  bin/configure_jenkins_ctl: bin/configure_jenkins_ctl
  bin/monit_debugger: bin/monit_debugger
  bin/nginx_ctl: bin/nginx_ctl

  bin/install_dependencies_ctl: bin/install_dependencies_ctl
  bin/install_dependencies.sh: bin/install_dependencies.sh
  data/properties.sh.erb: data/properties.sh

  helpers/ctl_setup.sh: helpers/ctl_setup.sh
  helpers/ctl_utils.sh: helpers/ctl_utils.sh

  config/nginx.conf.erb: config/nginx.conf
  config/mime.types: config/mime.types
  config/config.xml.erb: config/config.xml
  config/netrc.erb: config/netrc
  config/jenkins_plugins.conf.erb: config/jenkins_plugins.conf
  config/hudson.plugins.s3.S3BucketPublisher.xml.erb: config/hudson.plugins.s3.S3BucketPublisher.xml

  jenkins_jobs/deploy-cf.xml: jenkins_jobs/deploy-cf.xml
  jenkins_jobs/test-cf.xml: jenkins_jobs/test-cf.xml
  jenkins_jobs/stemcell-smoke-test.xml: jenkins_jobs/stemcell-smoke-test.xml
  jenkins_jobs/delete-deployment.xml: jenkins_jobs/delete-deployment.xml

properties:
  jenkins.admin.password:
    description: Admin user password
  jenkins.server.internal_http_port:
    description: "Internal http port between nginx & jenkins"
    default: 8088
  jenkins.server.ajp13_port:
    description: AJP13 protocal port
    default: 8009
  github.username:
    description: The GitHub username to use to pull
  github.password:
    description: The GitHub password to use to pull
  jenkins.plugins:
    description: Array of Jenkins plugins to install
    default: ['git']
  amazon.accesskey:
    description: Amazon API access key
  amazon.secretkey:
    description: Amazon API secret key
  amazon.encrypted_secretkey:
    description: Amazon API secret key - obfuscated by Jenkins for storage
  bosh.micro_ip:
    description: BOSH micro for use by jenkins jobs
